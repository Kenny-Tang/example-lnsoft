
# Git 分支建立
分支分为需求分支、测试分支 和 发版分支

需求分支 研发人员 主要的提交分支 在 `feature` 目录下，分支命名格式 `日期+需求名称(英文)`

测试分支 测试人员 使用的测试分支 测试分支以 `test-` 开始

修复分支 hotfix-{date} 问题紧急修复分支 `hotfix` 目录下

# Git 使用规范
- 使用Git过程中，必须通过创建分支进行开发，坚决禁止在主干分支上直接开发。review的同事有责任检查其他同事是否遵循分支规范。
- 在Git中，默认是不会提交空目录的，如果想提交某个空目录到版本库中，需要在该目录下新建一个 .gitignore 的空白文件，就可以提交了
- 多人协作时，不要各自在自己的 Git 分支开发，然后发文件合并。正确的方法应该是开一个远程分支，然后一起在远程分支里协作。不然，容易出现代码回溯（即别人的代码被覆盖的情况）
- 每个人提交代码是一定要 git diff 看提交的东西是不是都是自己修改的。如果有不是自己修改的内容，不要提交，否则很可能就是代码回溯
- review 代码的时候如果看到有被删除掉的代码，一定要确实是否是写代码的同事自己删除的。如果不是，很可能就是代码回溯

# 项目打包发布

项目目录如下：
```scss
src
├── main
│   ├── java
│   ├── resources
│   │   ├── application.properties (默认配置)
│   │   ├── dev
│   │   │   └── application.properties (开发环境配置)
│   │   ├── test
│   │   │   └── application.properties (测试环境配置)
│   │   ├── prod
│   │   │   └── application.properties (生产环境配置)
```

打包命令如下：

    mvn clean package -P env

其中 `env` 为指定打包所需要激活的配置， 开发、测试、生产分别为 `dev、test、prod`， 打包完成后，指定环境下的资源被打包到主资源目录下，如果有重名的配置文件则会覆盖主目录配置，优先使用自定义的配置。


## 研发环境打包

    mvn clean package 或者 mvn clean package -P dev

## 测试环境打包

    mvn clean package -P test

## 生产环境打包

    mvn clean package -P prod

# 项目默认编译配置
<details>
<summary>根据 dev test prod 环境配置打包策略</summary>

```xml
<profiles>
    <!-- 开发环境 -->
    <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault> <!-- 默认激活开发环境 -->
        </activation>
        <build>
            <resources>
                <resource>
                    <directory>src/main/resources/dev</directory>
                    <filtering>false</filtering>
                </resource>
            </resources>
        </build>
    </profile>
    <!-- 测试环境 -->
    <profile>
        <id>test</id>
        <build>
            <resources>
                <!-- 测试资源 -->
                <resource>
                    <directory>src/main/resources/test</directory>
                    <filtering>false</filtering>
                </resource>
            </resources>
        </build>
    </profile>
    <!-- 生产环境 -->
    <profile>
        <id>prod</id>
        <build>
            <resources>
                <resource>
                    <directory>src/main/resources/prod</directory>
                    <filtering>false</filtering>
                </resource>
            </resources>
        </build>
    </profile>
</profiles>
```
</details>


<br />
<br />
<br />
<br />
<br />
<br />

